((typeof self<"u"?self:this).webpackChunkMyLibrary=(typeof self<"u"?self:this).webpackChunkMyLibrary||[]).push([[2093],{92303:function(v,a,e){"use strict";e.r(a)},26752:function(v,a,e){var o=e(58959),r=o("match");v.exports=function(l){var f=/./;try{"/./"[l](f)}catch{try{return f[r]=!1,"/./"[l](f)}catch{}}return!1}},29498:function(v,a,e){var o=e(32889),r=TypeError;v.exports=function(l){if(o(l))throw r("The method doesn't accept regular expressions");return l}},14827:function(v,a,e){"use strict";var o=e(95610),r=e(64289),l=e(29498),f=e(27190),p=e(55863),y=e(26752),i=r("".indexOf);o({target:"String",proto:!0,forced:!y("includes")},{includes:function(h){return!!~i(p(f(this)),p(l(h)),arguments.length>1?arguments[1]:void 0)}})},75657:function(v,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={panelModel:{type:Object,required:!0},chartData:{type:Object,required:!0}},o=e;a.default=o},62093:function(v,a,e){"use strict";var o=e(38600);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=e(70748);e(3105),e(71342),e(37209),e(84873),e(19341),e(33071),e(25181),e(4064);var l=o(e(75657));e(92303);var f=e(2769),p=e(4980),y=(0,r.defineComponent)({name:"RichTextPanel",props:l.default,setup(i){var d=(0,r.ref)(""),h=O(),M=(0,r.computed)(function(){return i.panelModel.chartConfig.mapping.isShow?i.panelModel.chartConfig.mapping.list||[]:[]}),T=(0,f.debounce)(function(){if(d.value=i.panelModel.chartConfig.content,d.value){var t=d.value,n=d.value.match(/{{(##)?[a-zA-Z0-9._]+(##)?}}/g);n&&(n.forEach(function(u){var c=u.substring(2,u.length-2),s=!1;if(/##[a-zA-Z0-9._]+##/.test(c)&&(c=c.substring(2,c.length-2),s=!0),Object.prototype.hasOwnProperty.call(h,c)){var g=h[c];s&&(g=(0,p.replaceMappingValue)(g,M.value)),t=t.replace(new RegExp(u,"g"),g)}}),d.value=t)}},500);function O(){var t=i.chartData.data,n={};return t&&Object.keys(t).forEach(function(u){var c=t[u],s=c.dataset,g=c.columns;s.forEach(function(m,b){g.forEach(function(V){n["".concat(u,".").concat(b,".").concat(V.name)]=m[V.name]||""})})}),n}return(0,r.watch)(function(){return i.chartData},function(){h=O()},{deep:!0}),(0,r.watch)(function(){var t;return(t=i.panelModel)===null||t===void 0?void 0:t.chartConfig},function(){T()},{deep:!0,immediate:!0}),{text:d}},render(){return(0,r.createVNode)("div",{class:"chart-panel w-e-text-container full-height overflow-auto"},[(0,r.createVNode)("div",{class:"",innerHTML:this.text},null)])}});a.default=y},4980:function(v,a,e){"use strict";var o=e(38600);Object.defineProperty(a,"__esModule",{value:!0}),a.originalMapValue=a.SpecialMatchOptions=a.MappingValueTypeOptions=a.MappingValueClass=a.MappingSymbolOptions=void 0,a.replaceMappingValue=O,a.replaceValue=M,e(99057),e(14827),e(3105),e(19341),e(33071),e(25181),e(4064);var r=o(e(64375)),l=o(e(63638)),f=o(e(5271)),p=[{label:"\u503C",value:"value"},{label:"\u8303\u56F4",value:"range"},{label:"\u6587\u672C",value:"text"},{label:"\u6B63\u5219",value:"regex"},{label:"\u7279\u6B8A\u503C",value:"special"}];a.MappingValueTypeOptions=p;var y=[{label:"\u65E0",value:""},{label:"\u56FE\u6807",value:"icon"},{label:"\u56FE\u7247",value:"img"}];a.MappingSymbolOptions=y;var i="{{$value}}";a.originalMapValue=i;class d{constructor(){(0,l.default)(this,"type","value"),(0,l.default)(this,"text",i),(0,l.default)(this,"value",null),(0,l.default)(this,"range",[null,null]),(0,l.default)(this,"color",""),(0,l.default)(this,"icon",""),(0,l.default)(this,"iconsType",""),(0,l.default)(this,"src",void 0),(0,l.default)(this,"uid",void 0),this.uid=(0,f.default)()}}a.MappingValueClass=d;var h=[{label:"Null",value:null,description:"Matches null and undefined values"},{label:"NaN",value:"NaN",description:"Matches against Number.NaN (not a number)"},{label:"True",value:!0,description:"Boolean true values"},{label:"False",value:!1,description:"Boolean false values"},{label:"\u7A7A\u5B57\u7B26\u4E32",value:"",description:"Empty string"}];a.SpecialMatchOptions=h;function M(t,n){return n===i?n:n.includes(i)?n.replace(i,String(t)):n}function T(t,n,u){switch(t){case"icon":return n?'<i class="'.concat(n,'"></i>'):"";case"img":return u?'<img src="'.concat(u,'" height="16" width="16"/>'):"";default:return""}}function O(t,n){if(!t||!(n!=null&&n.length))return t;for(var u=t,c=n.length-1;c>=0;c--){var s=n[c],g=s.type,m=s.value,b=s.text,V=s.range,P=s.iconsType,D=s.icon,$=s.color,C=s.src,A=T(P,D,C),S=!1;switch(g){case"value":case"special":case"text":m===t&&(S=!0,u=M(t,b));break;case"range":{var E=(0,r.default)(V,2),N=E[0],R=E[1];R>N&&R>u&&N<u&&(S=!0,u=M(C,b))}break;case"regex":{var j=String(t);new RegExp(String(m),"g").test(j)&&(S=!0,u=j.replace(new RegExp(String(m),"g"),b))}break}if(S){u='<span style="color: '.concat($,'">').concat(u).concat(A,"</span>");break}}return u}}}]);
